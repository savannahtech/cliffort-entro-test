import { Queries, allQueryOptions } from '@/api/queries';
import CustomButton from '@/components/customs/Button';
import { TaskCard } from '@/components/taskcard';
import { TaskDetailsModal } from '@/components/taskcard/TaskDetailsModal';
import { ITaskFromAPI } from '@/types';
import { Box, Button, Stack, Typography } from '@mui/material';
import { AxiosError } from 'axios';
import { Inter } from 'next/font/google';
import Head from 'next/head';
import { useQuery } from 'react-query';

const inter = Inter({ subsets: ['latin'] });

const Tasks = () => {
	const {
		data: allTasks,
		isLoading: isLoadingTasks,
		error: tasksFetchingError,
	} = useQuery<ITaskFromAPI[], AxiosError>('tasks', Queries.getAllTasks, allQueryOptions);

	console.log(allTasks);

	return (
		<>
			<Head>
				<title>List of Tasks</title>
				<meta name="description" content="Generated by create next app" />
				<meta name="viewport" content="width=device-width, initial-scale=1" />
			</Head>
			<main className={inter.className}>
				<Stack padding={4} direction={'column'} rowGap={3} width={'80%'}>
					<Stack direction={'row'} alignItems={'center'} gap={2}>
						<Typography variant="h5" fontSize={22} fontWeight={'600'}>
							Tasks
						</Typography>
						<CustomButton btnType="tertiary" btnText="New Task" />
					</Stack>
					<Stack>
						<Box
							borderRadius={2}
							borderColor={''}
							border={1}
							sx={{
								cursor: 'pointer',
							}}
							padding={2}
							boxShadow={`0px 4px 6px -2px #10182808`}
						>
							<TaskCard />
						</Box>
					</Stack>
					<Stack>
						<Box
							borderRadius={2}
							borderColor={''}
							border={1}
							sx={{
								cursor: 'pointer',
							}}
							padding={2}
							boxShadow={`0px 4px 6px -2px #10182808`}
						>
							<TaskCard />
						</Box>
					</Stack>
				</Stack>
				{/* <TaskDetailsModal isOpen={true} handleCloseModal={() => console.log('close me ')} /> */}
			</main>
		</>
	);
};

export default Tasks;
